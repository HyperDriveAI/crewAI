<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.10.0" xml:lang="en-US">
  <compounddef id="tools__handler_8py" kind="file" language="Python">
    <compoundname>tools_handler.py</compoundname>
    <innerclass refid="classcrewai_1_1agents_1_1tools__handler_1_1ToolsHandler" prot="public">crewai::agents::tools_handler::ToolsHandler</innerclass>
    <innernamespace refid="namespacecrewai">crewai</innernamespace>
    <innernamespace refid="namespacecrewai_1_1agents">crewai::agents</innernamespace>
    <innernamespace refid="namespacecrewai_1_1agents_1_1tools__handler">crewai::agents::tools_handler</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1" refid="namespacecrewai_1_1agents_1_1tools__handler" refkind="compound"><highlight class="keyword">from</highlight><highlight class="normal"><sp/>typing<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Any,<sp/>Dict</highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>langchain.callbacks.base<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>BaseCallbackHandler</highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>..tools.cache_tools<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>CacheTools</highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>.cache.cache_handler<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>CacheHandler</highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight></codeline>
<codeline lineno="9" refid="classcrewai_1_1agents_1_1tools__handler_1_1ToolsHandler" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classcrewai_1_1agents_1_1tools__handler_1_1ToolsHandler" kindref="compound">ToolsHandler</ref>(BaseCallbackHandler):</highlight></codeline>
<codeline lineno="10"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Callback<sp/>handler<sp/>for<sp/>tool<sp/>usage.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight></codeline>
<codeline lineno="12" refid="classcrewai_1_1agents_1_1tools__handler_1_1ToolsHandler_1aaa9ea0d7d90838817c36edc0e0ed7519" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>last_used_tool:<sp/>Dict[str,<sp/>Any]<sp/>=<sp/>{}</highlight></codeline>
<codeline lineno="13" refid="classcrewai_1_1agents_1_1tools__handler_1_1ToolsHandler_1a5de03b60904d7704de1fab95b4c6543f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>cache:<sp/>CacheHandler</highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight></codeline>
<codeline lineno="15" refid="classcrewai_1_1agents_1_1tools__handler_1_1ToolsHandler_1a8521ab86de34665cc9f48f23db020fcd" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classcrewai_1_1agents_1_1tools__handler_1_1ToolsHandler_1a8521ab86de34665cc9f48f23db020fcd" kindref="member">__init__</ref>(self,<sp/>cache:<sp/>CacheHandler,<sp/>**kwargs:<sp/>Any):</highlight></codeline>
<codeline lineno="16"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Initialize<sp/>the<sp/>callback<sp/>handler.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="17" refid="classcrewai_1_1agents_1_1tools__handler_1_1ToolsHandler_1ac62fc1adc8fb1392ca280d3e32fefc78" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcrewai_1_1agents_1_1tools__handler_1_1ToolsHandler_1a5de03b60904d7704de1fab95b4c6543f" kindref="member">cache</ref><ref refid="classcrewai_1_1agents_1_1tools__handler_1_1ToolsHandler_1ac62fc1adc8fb1392ca280d3e32fefc78" kindref="member">cache</ref><sp/>=<sp/>cache</highlight></codeline>
<codeline lineno="18"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>super().<ref refid="classcrewai_1_1agents_1_1tools__handler_1_1ToolsHandler_1a8521ab86de34665cc9f48f23db020fcd" kindref="member">__init__</ref>(**kwargs)</highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight></codeline>
<codeline lineno="20" refid="classcrewai_1_1agents_1_1tools__handler_1_1ToolsHandler_1a78edc5a6e4bc8767fc7db64341cf4834" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classcrewai_1_1agents_1_1tools__handler_1_1ToolsHandler_1a78edc5a6e4bc8767fc7db64341cf4834" kindref="member">on_tool_start</ref>(</highlight></codeline>
<codeline lineno="21"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self,<sp/>serialized:<sp/>Dict[str,<sp/>Any],<sp/>input_str:<sp/>str,<sp/>**kwargs:<sp/>Any</highlight></codeline>
<codeline lineno="22"><highlight class="normal"><sp/><sp/><sp/><sp/>)<sp/>-&gt;<sp/>Any:</highlight></codeline>
<codeline lineno="23"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Run<sp/>when<sp/>tool<sp/>starts<sp/>running.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>name<sp/>=<sp/>serialized.get(</highlight><highlight class="stringliteral">&quot;name&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>name<sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>[</highlight><highlight class="stringliteral">&quot;invalid_tool&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;_Exception&quot;</highlight><highlight class="normal">]:</highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tools_usage<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;tool&quot;</highlight><highlight class="normal">:<sp/>name,</highlight></codeline>
<codeline lineno="28"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;input&quot;</highlight><highlight class="normal">:<sp/>input_str,</highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="30" refid="classcrewai_1_1agents_1_1tools__handler_1_1ToolsHandler_1a7706edc128c28408cdeff5d9761468c9" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcrewai_1_1agents_1_1tools__handler_1_1ToolsHandler_1aaa9ea0d7d90838817c36edc0e0ed7519" kindref="member">last_used_tool</ref><ref refid="classcrewai_1_1agents_1_1tools__handler_1_1ToolsHandler_1a7706edc128c28408cdeff5d9761468c9" kindref="member">last_used_tool</ref><sp/>=<sp/>tools_usage</highlight></codeline>
<codeline lineno="31"><highlight class="normal"></highlight></codeline>
<codeline lineno="32" refid="classcrewai_1_1agents_1_1tools__handler_1_1ToolsHandler_1ac902fba2479b00e49ccbc2706d80c38d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classcrewai_1_1agents_1_1tools__handler_1_1ToolsHandler_1ac902fba2479b00e49ccbc2706d80c38d" kindref="member">on_tool_end</ref>(self,<sp/>output:<sp/>str,<sp/>**kwargs:<sp/>Any)<sp/>-&gt;<sp/>Any:</highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Run<sp/>when<sp/>tool<sp/>ends<sp/>running.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;is<sp/>not<sp/>a<sp/>valid<sp/>tool&quot;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>output</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;Invalid<sp/>or<sp/>incomplete<sp/>response&quot;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>output</highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;Invalid<sp/>Format&quot;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>output</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>):</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classcrewai_1_1agents_1_1tools__handler_1_1ToolsHandler_1aaa9ea0d7d90838817c36edc0e0ed7519" kindref="member">last_used_tool</ref><ref refid="classcrewai_1_1agents_1_1tools__handler_1_1ToolsHandler_1a7706edc128c28408cdeff5d9761468c9" kindref="member">last_used_tool</ref>[</highlight><highlight class="stringliteral">&quot;tool&quot;</highlight><highlight class="normal">]<sp/>!=<sp/><ref refid="classcrewai_1_1tools_1_1cache__tools_1_1CacheTools" kindref="compound">CacheTools</ref>().name:</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcrewai_1_1agents_1_1tools__handler_1_1ToolsHandler_1a5de03b60904d7704de1fab95b4c6543f" kindref="member">cache</ref><ref refid="classcrewai_1_1agents_1_1tools__handler_1_1ToolsHandler_1ac62fc1adc8fb1392ca280d3e32fefc78" kindref="member">cache</ref>.add(</highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tool=self.<ref refid="classcrewai_1_1agents_1_1tools__handler_1_1ToolsHandler_1aaa9ea0d7d90838817c36edc0e0ed7519" kindref="member">last_used_tool</ref><ref refid="classcrewai_1_1agents_1_1tools__handler_1_1ToolsHandler_1a7706edc128c28408cdeff5d9761468c9" kindref="member">last_used_tool</ref>[</highlight><highlight class="stringliteral">&quot;tool&quot;</highlight><highlight class="normal">],</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>input=self.<ref refid="classcrewai_1_1agents_1_1tools__handler_1_1ToolsHandler_1aaa9ea0d7d90838817c36edc0e0ed7519" kindref="member">last_used_tool</ref><ref refid="classcrewai_1_1agents_1_1tools__handler_1_1ToolsHandler_1a7706edc128c28408cdeff5d9761468c9" kindref="member">last_used_tool</ref>[</highlight><highlight class="stringliteral">&quot;input&quot;</highlight><highlight class="normal">],</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>output=output,</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
    </programlisting>
    <location file="/tmp/github_repos_arch_doc_gen/HyperDriveAI/crewAI/src/crewai/agents/tools_handler.py"/>
  </compounddef>
</doxygen>
