<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<!-- BEGIN opengraph metadata -->
<meta property="og:title" content="Doxygen Awesome" />
<meta property="og:image" content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452" />
<meta property="og:description" content="Custom CSS theme for doxygen html-documentation with lots of customization parameters." />
<meta property="og:url" content="https://jothepro.github.io/doxygen-awesome-css/" />
<!-- END opengraph metadata -->
<!-- BEGIN twitter metadata -->
<meta name="twitter:image:src" content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452" />
<meta name="twitter:title" content="Doxygen Awesome" />
<meta name="twitter:description" content="Custom CSS theme for doxygen html-documentation with lots of customization parameters." />
<!-- END twitter metadata -->
<title>crewAI: Connect CrewAI to LLMs</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/svg+xml" href="logo.drawio.svg"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
<script type="text/javascript" src="toggle-alternative-theme.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeTabs.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- https://tholman.com/github-corners/ -->
<a href="https://github.com/jothepro/doxygen-awesome-css" class="github-corner" title="View source on GitHub" target="_blank" rel="noopener noreferrer">
    <svg viewBox="0 0 250 250" width="40" height="40" style="position: absolute; top: 0; border: 0; right: 0; z-index: 99;" aria-hidden="true">
    <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">crewAI
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part --><!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md__2tmp_2github__repos__arch__doc__gen_2HyperDriveAI_2crewAI_2docs_2how-to_2LLM-Connections.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Connect CrewAI to LLMs</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md51"></a> There are different types of connections. Ollama is the recommended way to connect to local LLMs. Azure uses a slightly different API and therefore has it's own connection object.</p>
<p>crewAI is compatible with any of the LangChain LLM components. See this page for more information: <a href="https://python.langchain.com/docs/integrations/llms/">https://python.langchain.com/docs/integrations/llms/</a></p>
<h1><a class="anchor" id="autotoc_md52"></a>
Ollama</h1>
<p>crewAI supports integration with local models thorugh <a href="https://ollama.ai/">Ollama</a> for enhanced flexibility and customization. This allows you to utilize your own models, which can be particularly useful for specialized tasks or data privacy concerns. We will conver other options for using local models in later sections. However, ollama is the recommended tool to use to host local models when possible.</p>
<h2><a class="anchor" id="autotoc_md53"></a>
Setting Up Ollama</h2>
<ul>
<li><b>Install Ollama</b>: Ensure that Ollama is properly installed in your environment. Follow the installation guide provided by Ollama for detailed instructions.</li>
<li><b>Configure Ollama</b>: Set up Ollama to work with your local model. You will probably need to <a href="https://github.com/jmorganca/ollama/blob/main/docs/modelfile.md">tweak the model using a Modelfile</a>. I'd recommend adding <code>Observation</code> as a stop word and playing with <code>top_p</code> and <code>temperature</code>.</li>
</ul>
<h2><a class="anchor" id="autotoc_md54"></a>
Integrating Ollama with CrewAI</h2>
<ul>
<li>Instantiate Ollama Model: Create an instance of the Ollama model. You can specify the model and the base URL during instantiation. For example:</li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">from</span> langchain.llms <span class="keyword">import</span> Ollama</div>
<div class="line">ollama_openhermes = Ollama(model=<span class="stringliteral">&quot;openhermes&quot;</span>)</div>
<div class="line"><span class="comment"># Pass Ollama Model to Agents: When creating your agents within the CrewAI framework, you can pass the Ollama model as an argument to the Agent constructor. For instance:</span></div>
<div class="line"> </div>
<div class="line">local_expert = Agent(</div>
<div class="line">  role=<span class="stringliteral">&#39;Local Expert at this city&#39;</span>,</div>
<div class="line">  goal=<span class="stringliteral">&#39;Provide the BEST insights about the selected city&#39;</span>,</div>
<div class="line">  backstory=<span class="stringliteral">&quot;&quot;&quot;A knowledgeable local guide with extensive information</span></div>
<div class="line"><span class="stringliteral">  about the city, it&#39;s attractions and customs&quot;&quot;&quot;</span>,</div>
<div class="line">  tools=[</div>
<div class="line">    SearchTools.search_internet,</div>
<div class="line">    BrowserTools.scrape_and_summarize_website,</div>
<div class="line">  ],</div>
<div class="line">  llm=ollama_openhermes, <span class="comment"># Ollama model passed here</span></div>
<div class="line">  verbose=<span class="keyword">True</span></div>
<div class="line">)</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md55"></a>
Open AI Compatible API Endpoints</h1>
<p>In the context of integrating various language models with CrewAI, the flexibility to switch between different API endpoints is a crucial feature. By utilizing environment variables for configuration details such as <code>OPENAI_API_BASE_URL</code>, <code>OPENAI_API_KEY</code>, and <code>MODEL_NAME</code>, you can easily transition between different APIs or models. For instance, if you want to switch from using the standard OpenAI GPT model to a custom or alternative version, simply update the values of these environment variables.</p>
<p>The <code>OPENAI_API_BASE_URL</code> variable allows you to define the base URL of the API to connect to, while <code>OPENAI_API_KEY</code> is used for authentication purposes. Lastly, the <code>MODEL_NAME</code> variable specifies the particular language model to be used, such as "gpt-3.5-turbo" or any other available model.</p>
<p>This method offers an easy way to adapt the system to different models or plataforms, be it for testing, scaling, or accessing different features available on various platforms. By centralizing the configuration in environment variables, the process becomes streamlined, reducing the need for extensive code modifications when switching between APIs or models.</p>
<div class="fragment"><div class="line"><span class="keyword">from</span> dotenv <span class="keyword">import</span> load_dotenv</div>
<div class="line"><span class="keyword">from</span> langchain.chat_models.openai <span class="keyword">import</span> ChatOpenAI</div>
<div class="line"> </div>
<div class="line">load_dotenv()</div>
<div class="line"> </div>
<div class="line">defalut_llm = ChatOpenAI(openai_api_base=os.environ.get(<span class="stringliteral">&quot;OPENAI_API_BASE_URL&quot;</span>, <span class="stringliteral">&quot;https://api.openai.com/v1&quot;</span>),</div>
<div class="line">                        openai_api_key=os.environ.get(<span class="stringliteral">&quot;OPENAI_API_KEY&quot;</span>, <span class="stringliteral">&quot;NA&quot;</span>),</div>
<div class="line">                        model_name=os.environ.get(<span class="stringliteral">&quot;MODEL_NAME&quot;</span>, <span class="stringliteral">&quot;gpt-3.5-turbo&quot;</span>))</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Create an agent and assign the LLM</span></div>
<div class="line">example_agent = Agent(</div>
<div class="line">  role=<span class="stringliteral">&#39;Example Agent&#39;</span>,</div>
<div class="line">  goal=<span class="stringliteral">&#39;Show how to assign a custom configured LLM&#39;</span>,</div>
<div class="line">  backstory=<span class="stringliteral">&#39;You hang out in the docs section of GitHub repos.&#39;</span>,</div>
<div class="line">  llm=default_llm</div>
<div class="line">)</div>
</div><!-- fragment --><p>The following sections show examples of the configuration settings for various OpenAI API compatible applications and services. We have included links to relavant documentation for the various application and services.</p>
<h2><a class="anchor" id="autotoc_md56"></a>
Open AI</h2>
<p>OpenAI is the default LLM that will be used if you do not specify a value for the <code>llm</code> argument when creating an agent. It will also use default values for the <code>OPENAI_API_BASE_URL</code> and <code>MODEL_NAME</code>. So the only value you need to set when using the OpenAI endpoint is the API key that from your account.</p>
<div class="fragment"><div class="line"># Required</div>
<div class="line">OPENAI_API_KEY=&quot;sk-...&quot;</div>
<div class="line"> </div>
<div class="line"># Optional</div>
<div class="line">OPENAI_API_BASE_URL=https://api.openai.com/v1</div>
<div class="line">MODEL_NAME=&quot;gpt-3.5-turbo&quot;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md57"></a>
FastChat</h2>
<p>FastChat is an open platform for training, serving, and evaluating large language model based chatbots.</p>
<p><a href="https://github.com/lm-sys/FastChat">GitHub</a></p>
<p><a href="https://github.com/lm-sys/FastChat?tab=readme-ov-file#api">API Documentation</a></p>
<p>Configuration settings: </p><div class="fragment"><div class="line"># Required</div>
<div class="line">OPENAI_API_BASE_URL=&quot;http://localhost:8001/v1&quot;</div>
<div class="line">OPENAI_API_KEY=NA</div>
<div class="line">MODEL_NAME=&#39;oh-2.5m7b-q51&#39;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md58"></a>
LM Studio</h2>
<p>Discover, download, and run local LLMs</p>
<p><a href="https://lmstudio.ai/">lmstudio.ai</a></p>
<p>Configuration settings: </p><div class="fragment"><div class="line"># Required</div>
<div class="line">OPENAI_API_BASE_URL=&quot;http://localhost:8000/v1&quot;</div>
<div class="line"> </div>
<div class="line">OPENAI_API_KEY=NA</div>
<div class="line">MODEL_NAME=NA</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md59"></a>
Mistral API</h2>
<p>Mistral AI's API endpoints</p>
<p><a href="https://mistral.ai/">Mistral AI</a></p>
<p><a href="https://docs.mistral.ai/">Documentation</a></p>
<div class="fragment"><div class="line">OPENAI_API_KEY=your-mistral-api-key</div>
<div class="line">OPENAI_API_BASE=https://api.mistral.ai/v1</div>
<div class="line">MODEL_NAME=&quot;mistral-small&quot; # Check documentation for available models</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md60"></a>
text-gen-web-ui</h2>
<p>A Gradio web UI for Large Language Models.</p>
<p><a href="https://github.com/oobabooga/text-generation-webui">GitHub</a></p>
<p><a href="https://github.com/oobabooga/text-generation-webui/wiki/12-%E2%80%90-OpenAI-API">API Documentation</a></p>
<p>Configuration settings:</p>
<div class="fragment"><div class="line"># Required</div>
<div class="line">API_BASE_URL=http://localhost:5000</div>
<div class="line">OPENAI_API_KEY=NA</div>
<div class="line">MODEL_NAME=NA</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md61"></a>
Other Inference API Endpoints</h1>
<p>Other platforms offer inference APIs such as Anthropic, Azure, and HuggingFace to name a few. Unfortunately, the APIs on the following platforms are not compatible with the OpenAI API specification. So, the following platforms will require a slightly different configuration than the examples in the previous section.</p>
<h2><a class="anchor" id="autotoc_md62"></a>
Azure Open AI</h2>
<p>Azure hosted OpenAI API endpoints have their own LLM component that needs to be imported from <code>langchain_openai</code>.</p>
<p>For more information, check out the langchain documenation for <a href="https://python.langchain.com/docs/integrations/llms/azure_openai">Azure OpenAI</a>.</p>
<div class="fragment"><div class="line"><span class="keyword">from</span> dotenv <span class="keyword">import</span> load_dotenv</div>
<div class="line"><span class="keyword">from</span> langchain_openai <span class="keyword">import</span> AzureChatOpenAI</div>
<div class="line"> </div>
<div class="line">load_dotenv()</div>
<div class="line"> </div>
<div class="line">default_llm = AzureChatOpenAI(</div>
<div class="line">    openai_api_version=os.environ.get(<span class="stringliteral">&quot;AZURE_OPENAI_VERSION&quot;</span>, <span class="stringliteral">&quot;2023-07-01-preview&quot;</span>),</div>
<div class="line">    azure_deployment=os.environ.get(<span class="stringliteral">&quot;AZURE_OPENAI_DEPLOYMENT&quot;</span>, <span class="stringliteral">&quot;gpt35&quot;</span>),</div>
<div class="line">    azure_endpoint=os.environ.get(<span class="stringliteral">&quot;AZURE_OPENAI_ENDPOINT&quot;</span>, <span class="stringliteral">&quot;https://&lt;your-endpoint&gt;.openai.azure.com/&quot;</span>),</div>
<div class="line">    api_key=os.environ.get(<span class="stringliteral">&quot;AZURE_OPENAI_KEY&quot;</span>)</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Create an agent and assign the LLM</span></div>
<div class="line">example_agent = Agent(</div>
<div class="line">  role=<span class="stringliteral">&#39;Example Agent&#39;</span>,</div>
<div class="line">  goal=<span class="stringliteral">&#39;Show how to assign a custom configured LLM&#39;</span>,</div>
<div class="line">  backstory=<span class="stringliteral">&#39;You hang out in the docs section of GitHub repos.&#39;</span>,</div>
<div class="line">  llm=default_llm</div>
<div class="line">)</div>
</div><!-- fragment --><p>Configuration settings: </p><div class="fragment"><div class="line">AZURE_OPENAI_VERSION=&quot;2022-12-01&quot;</div>
<div class="line">AZURE_OPENAI_DEPLOYMENT=&quot;&quot;</div>
<div class="line">AZURE_OPENAI_ENDPOINT=&quot;&quot;</div>
<div class="line">AZURE_OPENAI_KEY=&quot;&quot;</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.10.0-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://penify.dev/"><img class="footer" src="https://www.penify.dev/_next/static/media/snorkell-dark-logo.9fa414f5.svg" width="104" height="31" alt="doxygen"/></a> </li>
  </ul>
</div>
</body>
</html>
